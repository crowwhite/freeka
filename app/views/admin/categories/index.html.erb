<%= link_to 'Show Categories', admins_categories_path, class: 'btn btn-default', role: 'button' %>
<%= link_to 'Show Sub Categories', admins_sub_categories_path, class: 'btn btn-default', role: 'button' %>
<%= javascript_include_tag 'sub_categories' %>

<% if controller_name == 'sub_categories' %>
  <div class='link pull-right'>
    <%= link_to 'New Sub Category', new_sub_category_admins_categories_path, class: 'btn btn-primary', role: 'button' %>
  </div>
<% else %>
  <div class='link pull-right'>
    <%= link_to 'New Category', new_admins_category_path, class: 'btn btn-primary', role: 'button' %>
  </div>
<% end %>


<table class="table parent">
  <thead>
    <tr>
      <th>Name</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @categories.each do |category| %>
      <tr>
        <%= render 'manage', locals: { category: category } %>
      </tr>
      <% if controller_name == 'sub_categories' %>
        <% if category.sub_categories.size > 0 %>
          <tr class="sub_category hiddenn">
            <td colspan = 4>
              <table class="table sub_table">
                <thead>                
                  <tr>
                    <th>Sub-Category Name</th>
                    <th colspan="3"></th>
                  </tr>
                </thead>
                <tbody>
                  <% category.sub_categories.sort_by(&:name).each do |sub_category| %>
                    <tr>
                      <%= render 'manage', locals: { category: sub_category } %>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </td>
          </tr>
        <% end %>
      <% end %>
    <% end %>
  </tbody>

</table>
<%= paginate @categories %>
