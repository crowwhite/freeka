<h1>Requirements</h1>
<%= render 'status_select' %>
<table class="table table-striped">
  <thead>
    <th>Title</th>
    <th>Details</th>
    <th>Expiration Date</th>
    <th>Address</th>
    <th>Categories</th>
    <th>Status</th>
    <th>Enable/Disable</th>
    <th>Donors</th>
    <th>Requestor</th>
  </thead>
  <tbody>
    <% @requirements.each do |requirement| %>
      <tr>
        <td><%= link_to requirement.title, requirement %></td>
        <td><%= requirement.details.truncate(30) %></td>
        <td><%= requirement.expiration_date %></td>
        <td>
          <%= requirement.address.street %><br>
          <%= requirement.address.city %><br>
          <% country = Carmen::Country.coded(requirement.address.country_code) %>
          <%= country.subregions.coded(requirement.address.state_code).name.truncate(20) %><br>
          <%= country.name %>
        </td>
        <td>
          <%= render 'categories', locals: { requirement: requirement } %>
        </td>
        <td><%= requirement.status %></td>
        <%= render 'state', locals: { requirement: requirement } %>
        <%= content_tag :td, id: 'donors' do %>
          <%= render 'donors', locals: { requirement: requirement } %>
        <% end %>
        <td>
          <%= requirement.person.name %><br>
          <%= requirement.person.email %><br>
          <%= requirement.person.contact_no %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @requirements %>